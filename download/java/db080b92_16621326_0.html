<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<link rel="stylesheet" type="text/css" href="file:///${exe}/scripts/highlight.styles/${SyntaxHighlightStyleName}.css" />
		<style>
			body, table{font-family: 微软雅黑; font-size: 18pt}
			
			table{border-collapse: collapse; border: 1px solid gray; border-width: 2px 1px 2px 1px;}
			th{border: 1px solid gray; padding: 4px; background-color: #ddd;}
			td{border: 1px solid gray; padding: 4px;}
			tr:nth-child(2n){background-color: #f8f8f8;}
			pre{border: 2px solid #d6d6d6; padding: 0px; border-radius: 3px;}
		</style>
	
<link rel="stylesheet" type="text/css" href="1817fd6e_11c10399_0.css">
</head>
	<body>
		<div>发送方：
		</div>
		<div>
			<div><br />
			</div>
			<pre>
<code id="ID_17304B49B32" class="hljs processing"><ol><li><span class="hljs-keyword">package</span> com.msb.test04;</li><li></li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.net.*;</li><li></li><li><span class="hljs-comment">/**</span></li><li> * @author : msb-zhaoss</li><li> */</li><li><span class="hljs-keyword">public</span> class TestSend {<span class="hljs-comment">//发送方：</span></li><li></li><li>    <span class="hljs-comment">//这是一个main方法，是程序的入口：</span></li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) <span class="hljs-keyword">throws</span> IOException {</li><li>        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"学生上线。。。"</span>);</li><li>        <span class="hljs-comment">//1.准备套接字： 指定发送方的端口号</span></li><li>        DatagramSocket ds = <span class="hljs-keyword">new</span> DatagramSocket(<span class="hljs-number">8888</span>);</li><li>        <span class="hljs-comment">//2.准备数据包</span></li><li>        <span class="hljs-keyword">String</span> <span class="hljs-built_in">str</span> = <span class="hljs-string">"你好"</span>;</li><li>        <span class="hljs-built_in">byte</span>[] bytes = <span class="hljs-built_in">str</span>.getBytes();</li><li>        <span class="hljs-comment">/*</span></li><li>        需要四个参数：</li><li>        1.指的是传送数据转为字节数组</li><li>        2.字节数组的长度</li><li>        3.封装接收方的ip</li><li>        4.指定接收方的端口号</li><li>         */</li><li>        DatagramPacket dp = <span class="hljs-keyword">new</span> DatagramPacket(bytes,bytes.length, InetAddress.getByName(<span class="hljs-string">"localhost"</span>),<span class="hljs-number">9999</span>);</li><li>        <span class="hljs-comment">//发送：</span></li><li>        ds.send(dp);</li><li></li><li>        <span class="hljs-comment">//关闭资源</span></li><li>        ds.close();</li><li>    }</li><li>}</li><li></li></ol></code></pre>
			<div>接收方：
			</div>
		</div>
		<div>
			<div><br />
			</div>
			<pre>
<code id="ID_17304B4C55E" class="hljs processing"><ol><li><span class="hljs-keyword">package</span> com.msb.test04;</li><li></li><li><span class="hljs-keyword">import</span> java.io.IOException;</li><li><span class="hljs-keyword">import</span> java.net.DatagramPacket;</li><li><span class="hljs-keyword">import</span> java.net.DatagramSocket;</li><li><span class="hljs-keyword">import</span> java.net.SocketException;</li><li></li><li><span class="hljs-comment">/**</span></li><li> * @author : msb-zhaoss</li><li> */</li><li><span class="hljs-keyword">public</span> class TestReceive {<span class="hljs-comment">//接收方</span></li><li></li><li>    <span class="hljs-comment">//这是一个main方法，是程序的入口：</span></li><li>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> main(<span class="hljs-keyword">String</span>[] args) <span class="hljs-keyword">throws</span> IOException {</li><li>        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"老师上线了。。"</span>);</li><li>        <span class="hljs-comment">//1.创建套接字：指定接收方的端口</span></li><li>        DatagramSocket ds = <span class="hljs-keyword">new</span> DatagramSocket(<span class="hljs-number">9999</span>);</li><li>        <span class="hljs-comment">//2.有一个空的数据包，打算用来接收  对方传过来的数据包：</span></li><li>        <span class="hljs-built_in">byte</span>[] b = <span class="hljs-keyword">new</span> <span class="hljs-built_in">byte</span>[<span class="hljs-number">1024</span>];</li><li>        DatagramPacket dp = <span class="hljs-keyword">new</span> DatagramPacket(b,b.length);</li><li>        <span class="hljs-comment">//3.接收对方的数据包，然后放入我们的dp数据包中填充</span></li><li>        ds.receive(dp);<span class="hljs-comment">//接收完以后 dp里面就填充好内容了</span></li><li></li><li>        <span class="hljs-comment">//4.取出数据：</span></li><li>        <span class="hljs-built_in">byte</span>[] data = dp.getData();</li><li>        <span class="hljs-keyword">String</span> s = <span class="hljs-keyword">new</span> <span class="hljs-keyword">String</span>(data,<span class="hljs-number">0</span>,dp.getLength());<span class="hljs-comment">//dp.getLength()数组包中的有效长度</span></li><li>        System.out.<span class="hljs-built_in">println</span>(<span class="hljs-string">"学生对我说："</span>+s);</li><li></li><li>        <span class="hljs-comment">//5.关闭资源：</span></li><li>        ds.close();</li><li></li><li></li><li>    }</li><li>}</li><li></li></ol></code></pre>
			<div><br />
			</div>
		</div>
	
<script type="text/javascript" language="javascript" src="jquery.js"></script>
<script type="text/javascript" language="javascript" src="itemlink.js"></script><footer style="font-size: small; font-style: italic; text-align: right; margin-top: 16em; padding-top: 4px; border-top: 2px solid gray;">Generated with <a href="http://www.wjjsoft.com/mybase.html?ref=htmltree_export" target=_blank>Mybase Desktop 8.2.12</a></footer></body>
</html>